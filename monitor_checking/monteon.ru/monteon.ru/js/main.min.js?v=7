
(function(){var a=typeof module!=="undefined"&&module.exports;var b=typeof Element!=="undefined"&&"ALLOW_KEYBOARD_INPUT" in Element;var c=(function(){var k;var j;var e=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];var h=0;var f=e.length;var g={};for(;h<f;h++){k=e[h];if(k&&k[1] in document){for(h=0,j=k.length;h<j;h++){g[e[0][h]]=k[h]}return g}}return false})();var d={request:function(f){var e=c.requestFullscreen;f=f||document.documentElement;f[e]()},exit:function(){document[c.exitFullscreen]()},toggle:function(e){if(this.isFullscreen){this.exit()}else{this.request(e)}},onchange:function(){},onerror:function(){},raw:c};if(!c){if(a){module.exports=false}else{window.screenfull=false}return}Object.defineProperties(d,{isFullscreen:{get:function(){return !!document[c.fullscreenElement]}},element:{enumerable:true,get:function(){return document[c.fullscreenElement]}},enabled:{enumerable:true,get:function(){return !!document[c.fullscreenEnabled]}}});document.addEventListener(c.fullscreenchange,function(f){d.onchange.call(d,f)});document.addEventListener(c.fullscreenerror,function(f){d.onerror.call(d,f)});if(a){module.exports=d}else{window.screenfull=d}})();(function(a){a.fn.toc=function(e){var j=this,b=[],k,i=false,f,g,c=a(window);e=e||"h1,h2,h3,h4";f=a(e);if(!f.length){return}f.each(function(){var n=a(this)[0],l={id:n.id,tag:n.nodeName,text:n.innerText,parent:i,items:[]},m;k=i.items||b;m=i;while(!!m){if(m.tag===l.tag){k=m.parent.items||b;l.parent=m.parent||false}m=m.parent||false}i=l;k.push(l)});function d(o,m){var n=0,l,p;for(;n<m.length;n++){l=a('<li id="toc-'+m[n].id+'"><a href="#'+m[n].id+'">'+m[n].text+"</a></li>");if(m[n].items.length>0){p=a("<ul />");l.append(p);d(p,m[n].items)}o.append(l)}}g=a('<ul class="toc-root" />');d(g,b);this.append(g);function h(){var q,l=0,s=f.length,m=a(f[0])||null,r;j.find("li.toc-active").removeClass("toc-active");j.find("li a.active").removeClass("active");j.find(".toc-sub-active").removeClass("toc-sub-active");for(;l<s;l++){q=a(f[l]);if(q.offset().top-c.scrollTop()-5>=0){break}m=q}r=a("#toc-"+m[0].id);r.addClass("toc-active");r.children("a").addClass("active");r.children("ul").addClass("toc-sub-active");r.parents("ul").addClass("toc-sub-active")}c.scroll(function(){h()});h()}}(jQuery));(function(){var i=document.querySelector("#canvas");var q=$(i);var I=$("#fin").on("hidden.bs.modal",function(at){an=false;o(0)});if(!i){return}var w=i.getContext("2d");var L=0;var J=Math.abs,aj=Math.round,ap=Math.min;function N(ay,aE,aw){var aA,aC,av,ax=0,au=0,aD=0,at,az,aB;ay*=360;aA=(1-J(2*aw-1))*aE;aC=aA*(1-J((ay/60)%2-1));av=aw-aA/2;if(ay<60){ax=aA;au=aC}else{if(ay<120){ax=aC;au=aA}else{if(ay<180){au=aA;aD=aC}else{if(ay<240){au=aC;aD=aA}else{if(ay<300){ax=aC;aD=aA}else{if(ay<360){ax=aA;aD=aC}}}}}}at=ax+av;az=au+av;aB=aD+av;return[at*255,az*255,aB*255]}var R={id:"base",title:"",ctx:null,width:0,height:0,canRotate:false,isDynamic:false,rotateCW:function(){if(this.canRotate){L=(L+4+1)%4;this.draw()}},rotateCCW:function(){if(this.canRotate){L=(L+4-1)%4;this.draw()}},clear:function(av){var au=this.ctx,at=this.width,aw=this.height;av=av||"black";au.fillStyle=av;au.beginPath();au.rect(0,0,at,aw);au.fill()}};function j(){this.id="color-bars";this.title="Цветопередача";this.canRotate=true;var at=["#FFFFFF","#FFFF00","#00FFFF","#00FF00","#FF00FF","#FF0000","#0000FF"];this.draw=function(){var av=this.ctx,au=this.width,ax=this.height,ay=7,aw;this.clear("white");for(aw=0;aw<ay;aw++){av.fillStyle=at[aw];av.beginPath();switch(L){case 0:av.rect(aj(au/ay*aw),0,aj(au/ay)+1,ax);break;case 1:av.rect(0,aj(ax/ay*aw),au,aj(ax/ay)+1);break;case 2:av.rect(aj(au*(1-(aw+1)/ay)),0,aj(au/ay)+1,ax);break;case 3:av.rect(0,aj(ax*(1-(aw+1)/ay)),au,aj(ax/ay)+1);break}av.fill()}}}j.prototype=R;function d(av,au,at){this.id=av;this.title=au;this.color=at;this.draw=function(){this.clear(this.color)}}d.prototype=R;function C(){this.id="spectrum";this.title="Спектр";this.canRotate=true;this.draw=function(){var au=this.ctx,at=this.width,av=this.height,aw;this.clear();switch(L){case 0:aw=au.createLinearGradient(0,0,at,0);break;case 1:aw=au.createLinearGradient(0,0,0,av);break;case 2:aw=au.createLinearGradient(at,0,0,0);break;case 3:aw=au.createLinearGradient(0,av,0,0);break}aw.addColorStop(0,"#FF0000");aw.addColorStop(1/5,"#FFFF00");aw.addColorStop(2/5,"#00FF00");aw.addColorStop(3/5,"#00FFFF");aw.addColorStop(4/5,"#0000FF");aw.addColorStop(5/5,"#FF00FF");au.fillStyle=aw;au.beginPath();au.rect(0,0,at,av);au.fill()}}C.prototype=R;function ae(){this.id="hsl-spectrum";this.title="Тональный спектр";this.canRotate=true;var at=[[0,1,0],[1,0,-1],[1,-1,0],[0,0,1]];this.draw=function(){var aG=this.ctx,av=this.width,aE=this.height,ax,aA,aB,aD,aC,az=0,aF,aw,au,ay;this.clear();ax=aG.getImageData(0,0,av,aE);aA=ax.data;aF=at[L];aw=aF[0];for(aC=0;aC<aE;aC++){for(aD=0;aD<av;aD++){au=aD/av;ay=aC/aE;aB=N(aw+aF[1]*au+aF[2]*ay,1,aw+aF[2]*au+aF[1]*ay);aA[az]=aB[0];aA[az+1]=aB[1];aA[az+2]=aB[2];az+=4}}aG.putImageData(ax,0,0)}}ae.prototype=R;function B(aw,av,au,at){this.id=aw;this.title=av;this.canRotate=true;this.color1=au;this.color2=at;this.draw=function(){var ay=this.ctx,ax=this.width,az=this.height,aA;this.clear();switch(L){case 0:aA=ay.createLinearGradient(0,0,ax,0);break;case 1:aA=ay.createLinearGradient(0,0,0,az);break;case 2:aA=ay.createLinearGradient(ax,0,0,0);break;case 3:aA=ay.createLinearGradient(0,az,0,0);break}aA.addColorStop(0,this.color1);aA.addColorStop(1,this.color2);ay.fillStyle=aA;ay.beginPath();ay.rect(0,0,ax,az);ay.fill()}}B.prototype=R;function M(){this.id="flicker-dots-25";this.title="Мерцание 25%";this.draw=function(){var av=this.ctx,ax=this.width,au=this.height,aA,ay,at,az,aw;this.clear("white");aA=av.getImageData(0,0,ax,au);ay=aA.data;for(az=0;az<au;az+=2){for(at=0;at<ax;at+=2){aw=(az*ax+at)*4;ay[aw]=ay[aw+1]=ay[aw+2]=0}}av.putImageData(aA,0,0)}}M.prototype=R;function ac(){this.id="flicker-dots-50";this.title="Мерцание 50%";this.draw=function(){var av=this.ctx,ax=this.width,au=this.height,aA,ay,at,az,aw;this.clear("white");aA=av.getImageData(0,0,ax,au);ay=aA.data;for(az=0;az<au;az+=2){for(at=0;at<ax;at+=2){aw=(az*ax+at)*4;ay[aw]=ay[aw+1]=ay[aw+2]=0;aw+=(ax+1)*4;ay[aw]=ay[aw+1]=ay[aw+2]=0}}av.putImageData(aA,0,0)}}ac.prototype=R;function ar(){this.id="flicker-dots-75";this.title="Мерцание 75%";this.draw=function(){var av=this.ctx,ax=this.width,au=this.height,aA,ay,at,az,aw;this.clear("black");aA=av.getImageData(0,0,ax,au);ay=aA.data;for(az=0;az<au;az+=2){for(at=0;at<ax;at+=2){aw=(az*ax+at)*4;ay[aw]=ay[aw+1]=ay[aw+2]=255}}av.putImageData(aA,0,0)}}ar.prototype=R;function k(){this.id="flicker-dots-double";this.title="Мерцание-1 (через 2 пикселя)";this.canRotate=true;this.draw=function(){var aC=this.ctx,at=this.width,aB=this.height,au,aw,aA,ay,av,az,ax;this.clear("white");au=aC.getImageData(0,0,at,aB);aw=au.data;az=(L%2===0)?1:0.5;ax=1.5-az;for(ay=0;ay<aB;ay++){for(aA=0;aA<at;aA++){if(((az*aA|0)+(ax*ay|0))%2===0){av=(ay*at+aA)*4;aw[av]=aw[av+1]=aw[av+2]=0}}}aC.putImageData(au,0,0)}}k.prototype=R;function af(){this.id="flicker-dots-double-2";this.title="Мерцание-2 (через 2 пикселя)";this.canRotate=true;this.draw=function(){var aC=this.ctx,at=this.width,aB=this.height,au,aw,aA,ay,av,az,ax;this.clear("#800080");au=aC.getImageData(0,0,at,aB);aw=au.data;az=(L%2===0)?1:0.5;ax=1.5-az;for(ay=0;ay<aB;ay++){for(aA=0;aA<at;aA++){if(((az*aA|0)+(ax*ay|0))%2===0){av=(ay*at+aA)*4;aw[av]=aw[av+2]=0;aw[av+1]=128}}}aC.putImageData(au,0,0)}}af.prototype=R;function ag(){this.id="sharpness";this.title="Резкость";this.draw=function(){var aI=this.ctx,av=this.width,aG=this.height,ax,aB,aF,aE,az,aD,aA,ay,aw,aH,aC,au=159,at;this.clear("white");ax=aI.getImageData(0,0,av,aG);aB=ax.data;for(aE=0;aE<aG;aE++){for(aF=0;aF<av;aF++){az=(aE*av+aF)*4;aD=(aF/48)|0;aA=(aE/48)|0;ay=aF%48;aw=aE%48;aH=(aD%6+(aA*2)%6)%6;aC=0;switch(aH){case 0:aC=(ay+aw)%2===0?au:0;break;case 1:aC=(((ay/2)|0)+((aw/2)|0))%2===0?au:0;break;case 2:aC=aw%2===0?au:0;break;case 3:aC=(((aw+1)/2)|0)%2===0?au:0;break;case 4:aC=ay%2===0?au:0;break;case 5:aC=(((ay-1)/2)|0)%2===0?au:0;break}aB[az]=aB[az+1]=aB[az+2]=aC}}aI.putImageData(ax,0,0);at=ap(av,aG)/4;aI.fillStyle="#747474";aI.beginPath();aI.arc(av/2,aG/2,at,0,2*Math.PI);aI.fill()}}ag.prototype=R;function U(){this.id="sharpness-grid";this.title="Резкость-2";this.draw=function(){var av=this.ctx,ax=this.width,at=this.height,aw,ay,au,az;this.clear("#808080");av.fillStyle="#808080";av.strokeStyle="#202020";av.lineWidth=1;av.beginPath();av.moveTo(0.5,aj(at/2)+0.5);av.lineTo(ax-0.5,aj(at/2)+0.5);av.moveTo(aj(ax/2)+0.5,0.5);av.lineTo(aj(ax/2)+0.5,at-0.5);av.moveTo(0,0);av.lineTo(ax,at);av.moveTo(0,at);av.lineTo(ax,0);av.stroke();ay=(ap(ax,at)/4)|0;av.beginPath();av.arc(ax/2,at/2,ay,0,2*Math.PI);av.fill();av.stroke();av.strokeStyle="#FFFFFF";av.beginPath();av.rect(0.5,0.5,ax-1,at-1);av.stroke();av.beginPath();av.rect(aj(ax*0.05)+0.5,aj(at*0.05)+0.5,aj(ax*0.9),aj(at*0.9));av.rect(aj(ax*0.1)+0.5,aj(at*0.1)+0.5,aj(ax*0.8),aj(at*0.8));av.stroke();av.strokeStyle="#202020";for(aw=0;aw<5;aw++){az=((aw+1)%2)*0.5;av.lineWidth=aw+1;av.beginPath();au=(0.5+(aw-2)*0.05);av.moveTo(aj(0.385*ax)+az,aj(au*at)+az);av.lineTo(aj(0.615*ax)+az,aj(au*at)+az);av.moveTo(aj(au*ax)+az,aj(0.385*at)+az);av.lineTo(aj(au*ax)+az,aj(0.615*at)+az);av.stroke()}}}U.prototype=R;function P(){this.id="contrast-clipping";this.title="Контрастность";var at=["rgb(%,%,%)","rgb(%,16,16)","rgb(16,%,16)","rgb(16,16,%)"];this.draw=function(){var aG=this.ctx,au=this.width,aE=this.height,ay,aw,aD,aC,aA,az,ax,aF,aB,av;this.clear("#808080");aD=aj(ap(au,aE*2)/6);for(az=0;az<2;az++){for(aA=0;aA<2;aA++){aF=at[az*2+aA];ay=aj(au*(0.25+0.5*aA));aw=aj(aE*(0.25+0.5*az));for(ax=0;ax<6;ax++){aC=aD*(1-ax/5.5);for(av in [0,1]){aB=(av*2-1);aG.fillStyle=aF.replace(/%/g,239+((4+6*av-aB*ax)%5)*4);aG.beginPath();aG.rect(ay+aB*aD/2-aC/2,aw-aC/2,aC,aC);aG.fill()}}}}}}P.prototype=R;function aq(){this.id="contrast-gradients";this.title="Контрастность (градиенты)";var at=["rgb(%,%,%)","rgb(%,0,0)","rgb(0,%,0)","rgb(0,0,%)"];this.draw=function(){var aE=this.ctx,au=this.width,aC=this.height,ay=aj(ap(au,aC)*0.9),aB=aj(ay/32),aA=aj(ay/4),aw,av,az,ax,aD,aF;this.clear("#000000");aE.font=aB*0.6+"px monospace";aE.textAlign="center";aE.textBaseline="middle";for(ax=0;ax<4;ax++){aD=at[ax];for(az=0;az<32;az++){aw=(au-ay)/2+aB*az;av=(aC-ay)/2+aA*ax;aE.fillStyle=aD.replace(/%/g,7+az*8);aE.beginPath();aE.rect(aw,av,aB+1,aA*0.8);aE.fill();aE.fillStyle="#808080";aF=(az+1).toString();aE.fillText(aF,aw+aB/2,av+aA*0.9)}}}}aq.prototype=R;function ai(at){this.kind=(at||0)%2;this.id=(!!this.kind)?"white-level":"black-level";this.title=(!!this.kind)?"Уровень белого":"Уровень черного";this.draw=function(){var aK=this.ctx,au=this.width,aI=this.height,aC=5,aB=4,aF=aj(ap(au,aI)/Math.max(aC,aB)*0.75),aD=aF/4,aE=aF+aD,aG=aC*aE-aD,aA=aB*aE-aD,ax,av,az,ay,aJ="rgb(%,%,%)",aH,aw=this.kind;(!!aw)?this.clear("#ffffff"):this.clear("#000000");aK.font="12px monospace";aK.textAlign="left";aK.textBaseline="bottom";for(ay=0;ay<aB;ay++){for(az=0;az<aC;az++){ax=(au-aG+aD)/2+az*aE;av=(aI-aA+aD)/2+ay*aE;aH=255*aw+(1-aw*2)*(ay*aC+az+1);aK.fillStyle=aJ.replace(/%/g,aH);aK.beginPath();aK.rect(ax,av,aF,aF);aK.fill();aK.fillStyle="#808080";aK.fillText(aH,ax,av)}}}}ai.prototype=R;function ad(){this.id="geometry-grid";this.title="Геометрия";this.draw=function(){var aE=this.ctx,at=this.width,aD=this.height,au=16,aC=at/16,ay=aD/16,ax,aw,aB,aA,av,az;this.clear();av=aE.getImageData(0,0,at,aD);az=av.data;for(aw=0;aw<au+1;aw++){aA=(aw===au)?aD-1:aj(aw*ay);for(aB=0;aB<at;aB++){ax=(aA*at+aB)*4;az[ax]=az[ax+1]=az[ax+2]=255}aB=(aw===au)?at-1:aj(aw*aC);for(aA=0;aA<aD;aA++){ax=(aA*at+aB)*4;az[ax]=az[ax+1]=az[ax+2]=255}}aE.putImageData(av,0,0)}}ad.prototype=R;function h(){this.id="image-cropping";this.title="Отсечение";this.draw=function(){var aD=this.ctx,at=this.width,aC=this.height,au=ap(aj(ap(at*0.0375,aC*0.0375)/5)*5,30),aA=aj(at*0.75/au),ay=aj(aC*0.75/au),aB=aj((at-aA*au)/2),aw=aj((aC-ay*au)/2),av,az,ax;this.clear("#404040");aD.strokeStyle="#ffffff";aD.fillStyle=aD.strokeStyle;aD.lineWidth=1;aD.font="12px monospace";for(av=0;av<au;av++){aD.beginPath();aD.rect(av+0.5,aw+av*ay+0.5,aB-av,ay);aD.rect(aB+av*aA+0.5,au-av-1+0.5,aA,aw-au+av+1);az=aB+aA*au;aD.rect(az+0.5,aw+av*ay+0.5,at-az-au+av,ay);ax=aw+ay*au;aD.rect(aB+av*aA+0.5,ax+0.5,aA,aC-ax-av-1);aD.textAlign="center";aD.textBaseline="bottom";aD.fillText(au-av,aB+aA*(av+0.5),aw);aD.textBaseline="top";aD.fillText(av+1,aB+aA*(av+0.5),aC-aw+3);aD.textBaseline="middle";aD.textAlign="right";aD.fillText(av+1,aB-3,aw+ay*(av+0.5));aD.textAlign="left";aD.fillText(au-av,at-aB+3,aw+ay*(av+0.5));aD.stroke()}}}h.prototype=R;function K(){this.id="geometry-16x9";this.title="Геометрия 16:9";this.draw=function(){var aB=this.ctx,at=this.width,aA=this.height,ay=aj(Math.max(at/16,aA/9)),az=aj((at-ay*16)/2),ax=aj((aA-ay*9)/2),av,au,aw;this.clear();aB.strokeStyle="#999999";aB.fillStyle="#000000";aB.lineWidth=1;aB.font="12px monospace";aB.beginPath();aB.stroke();for(au=0;au<9;au++){for(av=0;av<16;av++){aB.beginPath();aB.rect(az+av*ay+0.5,ax+au*ay+0.5,ay+(av===15?-1:0),ay+(au===8?-1:0));aB.stroke()}}aB.strokeStyle="#ffffff";aB.lineWidth=2;for(au=0;au<2;au++){for(av=0;av<2;av++){aB.beginPath();aB.arc((at+(av*2-1)*13*ay)/2,(aA+(au*2-1)*6*ay)/2,ay,0,2*Math.PI);aB.fill();aB.stroke()}}aB.beginPath();aB.arc(at/2,aA/2,ay*3.5,0,2*Math.PI);aB.fill();aB.stroke();az=aj((at-9*ay)/2);ax=aj((aA-9*ay)/2);aB.lineWidth=1;aB.beginPath();aB.rect(az+0.5,ax+0.5,9*ay-1,9*ay-1);aB.stroke();aB.beginPath();aB.moveTo(az,ax);aB.lineTo(az+9*ay,ax+9*ay);aB.moveTo(az,ax+9*ay);aB.lineTo(az+9*ay,ax);aB.stroke();aB.beginPath();aB.rect(aj((at-4.5*ay)/2)+0.5,aj((aA-4.5*ay)/2)+0.5,aj(4.5*ay),aj(4.5*ay));aB.rect(aj((at-1.5*ay)/2)+0.5,aj((aA-1.5*ay)/2)+0.5,aj(1.5*ay),aj(1.5*ay));aB.stroke()}}K.prototype=R;function F(){this.id="luma-zone-plate";this.title="Зонная пластинка яркости";this.draw=function(){var aG=this.ctx,at=this.width,aF=this.height,ay=at/2,aw=aF/2,aC,aA,az,aE,aD,ax,av,aB,au;this.clear("white");av=aG.getImageData(0,0,at,aF);aB=av.data;ax=2/ap(at,aF);for(aD=0;aD<aF;aD++){for(aE=0;aE<at;aE++){aA=(aD*at+aE)*4;au=(aE-ay)*(aE-ay)+(aD-aw)*(aD-aw);aC=(1+Math.cos(ax*au))/2;aB[aA]=aB[aA+1]=aB[aA+2]=aC*255}}aG.putImageData(av,0,0)}}F.prototype=R;function H(){this.id="dynamic-box";this.title="Динамический квадрат";this.isDynamic=true;this.delay=5;this.draw=function(){var aw=this.ctx,ay=this.width,au=this.height,at=ay/2,az=au/2,av=50,ax=50;this.x=at;this.y=az;this.setVels()};this.x=0;this.y=0;this.vx=0;this.vy=0;this.size=50;this.setVels=function(){var au=5,at=0.1;this.vx=2*(0.5-Math.random())*au;this.vy=2*(0.5-Math.random())*au;if(Math.abs(this.vx)<at||Math.abs(this.vy)<at){this.setVels()}};this.checkBounds=function(at,av){var au=this.size/2;return at-au>=0&&av-au>=0&&at+au<this.width&&av+au<this.height};this.canMove=function(at,au){return this.checkBounds(at+this.vx,au+this.vy)};this.move=function(){while(!this.canMove(this.x,this.y)){this.setVels()}this.x=this.x+this.vx,this.y=this.y+this.vy};this.redraw=function(){var aA=this;var av=aA.ctx,ay=aA.width,au=aA.height,at=ay/2,az=au/2,ax=aA.size,aw=aA.size/2;aA.clear("black");aA.move();av.fillStyle="#fff";av.beginPath();av.rect(aA.x-aw,aA.y-aw,ax,ax);av.fill()}}H.prototype=R;function l(){this.id="dynamic-line";this.title="Динамическая линия";this.isDynamic=true;this.delay=10;this.draw=function(){var au=this.ctx,av=this.width,at=this.height;this.k=0;this.x1=0;this.y1=0;this.x2=av;this.y2=0};this.k=0;this.x1=0;this.y1=0;this.x2=0;this.y2=0;this.d=10;this.move=function(){(this.k===0)?((this.y2>=this.height)?this.nextK():this.y2+=this.d):0;(this.k===1)?((this.x1>=this.width)?this.nextK():this.x1+=this.d):0;(this.k===2)?((this.x2<=0)?this.nextK():this.x1-=this.d,this.x2-=this.d):0;(this.k===3)?((this.x2>=this.width)?this.nextK():this.x1+=this.d,this.x2+=this.d):0;(this.k===4)?((this.x2<=0)?this.nextK():this.x2-=this.d):0;(this.k===5)?((this.y1>=this.height)?this.nextK():this.y1+=this.d):0;(this.k===6)?((this.y2<=0)?this.nextK():this.y1-=this.d,this.y2-=this.d):0;(this.k===7)?((this.y2>=this.height)?this.nextK():this.y1+=this.d,this.y2+=this.d):0;(this.k===8)?((this.y2<=0)?this.nextK():this.y2-=this.d):0;(this.k===9)?((this.x1<=0)?this.nextK():this.x1-=this.d):0;(this.k===10)?((this.x2>=this.width)?this.nextK():this.x1+=this.d,this.x2+=this.d):0;(this.k===11)?((this.x2<=0)?this.nextK():this.x1-=this.d,this.x2-=this.d):0;(this.k===12)?((this.x2>=this.width)?this.nextK():this.x2+=this.d):0;(this.k===13)?((this.y1<=0)?this.nextK():this.y1-=this.d):0;(this.k===14)?((this.y2>=this.height)?this.nextK():this.y1+=this.d,this.y2+=this.d):0;(this.k===15)?((this.y2<=0)?this.nextK():this.y1-=this.d,this.y2-=this.d):0};this.nextK=function(){this.k=(this.k+1)%16;this.x1=Math.max(0,Math.min(this.width-1,this.x1));this.y1=Math.max(0,Math.min(this.height-1,this.y1));this.x2=Math.max(0,Math.min(this.width-1,this.x2));this.y2=Math.max(0,Math.min(this.height-1,this.y2));this.d=1+Math.random()*4};this.redraw=function(){var au=this.ctx,av=this.width,at=this.height;this.clear("black");this.move();au.strokeStyle="#fff";au.lineWidth=1;au.beginPath();au.moveTo(this.x1+0.5,this.y1+0.5);au.lineTo(this.x2+0.5,this.y2+0.5);au.stroke()}}l.prototype=R;function e(){this.id="dynamic-bars";this.title="Динамические полосы";this.isDynamic=true;this.delay=5;this.n=5;this.draw=function(){var av=this.ctx,aw=this.width,au=this.height,at=aw/2;this.x=at;this.setVels()};this.x=0;this.vx=0;this.size=50;this.setVels=function(){var au=5,at=0.1;this.vx=2*(0.5-Math.random())*au;if(Math.abs(this.vx)<at){this.setVels()}};this.checkBounds=function(at){var au=this.size/2;return at-au>=0&&at+au<this.width};this.canMove=function(at){return this.checkBounds(at+this.vx)};this.move=function(){while(!this.canMove(this.x)){this.setVels()}this.x=this.x+this.vx};this.redraw=function(){var aA=this;var av=aA.ctx,ax=aA.width,au=aA.height,az=this.n,ay=ax/az/2;aA.clear("black");aA.move();av.fillStyle="#fff";for(var aw=-1;aw<az;aw++){var at=aA.x%(2*ay);av.beginPath();av.rect(at+aw*2*ay,0,ay,au);av.fill()}}}e.prototype=R;function D(){this.id="dynamic-video";this.title="Видео";this.isDynamic=true;this.delay=5;this.video=document.getElementById("video");this.videoWidth=1280;this.videoHeight=720;this.draw=function(){var au=this.ctx,aw=this.width,at=this.height;var av=Math.min(aw/this.videoWidth,at/this.videoHeight);this.w=this.videoWidth*av;this.h=this.videoHeight*av;this.x=(aw-this.w)/2;this.y=(at-this.h)/2;au.fillStyle="#000";this.clear("#000");this.video.play()};this.x=0;this.y=0;this.w=0;this.h=0;this.redraw=function(){var at=this.ctx;var au=this.video;if(au.paused||au.ended){return}at.drawImage(au,this.x,this.y,this.w,this.h)};this.doOnStop=function(){this.video.pause()}}D.prototype=R;function aa(){this.x=0;this.y=0;this.vx=1;this.vy=1;this.vbasis=3;this.vmin=0.1;this.width=100;this.height=100;this.setVels=function(){this.vx=2*(0.5-Math.random())*this.vbasis;this.vy=2*(0.5-Math.random())*this.vbasis;if(Math.abs(this.vx)<this.vmin||Math.abs(this.vy)<this.vmin){this.setVels()}};this.checkBounds=function(at,au){return at>=0&&au>=0&&at<this.width&&au<this.height};this.canMove=function(at,au){return this.checkBounds(at+this.vx,au+this.vy)};this.move=function(){while(!this.canMove(this.x,this.y)){this.setVels()}this.x+=this.vx;this.y+=this.vy}}function g(){this.id="dynamic-points";this.title="Динамические точки";this.isDynamic=true;this.delay=5;this.count=50;this.points=[];this.maxDist=100;this.maxTone=3600;this.tone=0;this.newPoint=function(){var at=new aa();at.x=this.width*Math.random();at.y=this.height*Math.random();at.width=this.width;at.height=this.height;at.setVels();return at};this.draw=function(){this.points=[];for(var at=0;at<this.count;at++){var au=this.newPoint();this.points.push(au)}this.maxDist=Math.sqrt(this.width*this.width+this.height*this.height)};this.redraw=function(){var aH=this.ctx,au=this.width,aF=this.height;this.tone=(this.tone+1)%this.maxTone;var az=this.tone/this.maxTone;var aB=N(az,0.5,0.25);this.clear("rgba("+Math.round(aB[0])+","+Math.round(aB[1])+","+Math.round(aB[2])+",1)");aH.fillStyle="rgba(255,255,255,0.75)";aH.strokeStyle="#999";var aw=0.15;var av=this.points.length;for(var ay=0;ay<av-1;ay++){var aE=this.points[ay];for(var ax=ay+1;ax<av;ax++){var aD=this.points[ax];var aI=aE.x-aD.x;var aG=aE.y-aD.y;var aA=Math.sqrt(aI*aI+aG*aG);var aC=(1-Math.min(aA/(aw*this.maxDist),1))*0.75;aH.strokeStyle="rgba(255,255,255,"+aC+")";if(aA<aw*this.maxDist){aH.beginPath();aH.moveTo(aE.x,aE.y);aH.lineTo(aD.x,aD.y);aH.stroke()}}}for(var ay in this.points){var at=this.points[ay];at.move();aH.beginPath();aH.arc(at.x,at.y,2,0,2*Math.PI);aH.fill()}}}g.prototype=R;var m=[{id:"color",title:"Цветопередача",items:[new j(),new d("red-color","Красный экран","#FF0000"),new d("green-color","Зеленый экран","#00FF00"),new d("blue-color","Синий экран","#0000FF"),new d("yellow-color","Желтый экран","#FFFF00"),new d("magenta-color","Пурпурный экран","#FF00FF"),new d("cyan-color","Голубой экран","#00FFFF"),new d("white-color","Белый экран","#FFFFFF"),new d("black-color","Черный экран","#000000"),]},{id:"gradients",title:"Градиенты",items:[new C(),new ae(),new B("red-yellow-gradient","Красно-желтый градиент","#FF0000","#FFFF00"),new B("yellow-green-gradient","Желто-зеленый градиент","#FFFF00","#00FF00"),new B("green-cyan-gradient","Зелено-голубой градиент","#00FF00","#00FFFF"),new B("cyan-blue-gradient","Голубо-синий градиент","#00FFFF","#0000FF"),new B("blue-magenta-gradient","Сине-пурпурный градиент","#0000FF","#FF00FF"),new B("magenta-red-gradient","Пурпурно-красный градиент","#FF00FF","#FF0000")]},{id:"flicker",title:"Мерцание",items:[new M(),new ac(),new ar(),new k(),new af()]},{id:"sharpness",title:"Резкость",items:[new ag(),new U()]},{id:"contrast",title:"Контрастность и яркость",items:[new P(),new aq(),new ai(0),new ai(1),new F()]},{id:"grids",title:"Геометрия и сетки",items:[new ad(),new h(),new K()]},{id:"dynamics",title:"Динамические тесты",items:[new H(),new l(),new e(),new D(),]}];var T=new g();var v=m[0];var n=v.items[0];var S=false;var A=false;var s=function(){if(S){setTimeout(s,100)}else{x()}};var ao=function(){A=true;s()};var x=function(){A=false;var au=window.innerWidth,at=window.innerHeight;w.canvas.width=au;w.canvas.height=at;n.ctx=w;n.width=au;n.height=at;n.draw();if(n.isDynamic){u(n)}};var u=function(at){S=true;if(A){S=false;if(at.doOnStop){at.doOnStop()}return}at.redraw();setTimeout(u,at.delay||5,at)};var al=$("#controls,#nav-controls,#tad-box");var b=$("#screen-groups");var Z=true;var an=false;var f=false;var Q=$("#tad-box");var E=true;var p=false;var a=function(){q.css({cursor:"none"});$("body, #nav-controls a").css({cursor:"none"});p=true};var ab=function(){q.css({cursor:"default"});$("#nav-controls a").css({cursor:"pointer"});$("body").css({cursor:"default"});p=false};var Y=0;var W=function(){if(b.hasClass("open")){Y=0}Y++;if(Y>=2){al.fadeOut({complete:function(){a()}})}setTimeout(W,1000)};var V=-1;var O=function(au){var at=0;if(V===au){return}V=au;if(!Z){if($("#controls:hover, #nav-controls a span:hover").length>0){at=1}else{at=au/al.offset().top}at=(at>1)?1:at;al.css({opacity:at}).show()}else{al.hide()}p&&ab()};W();$(window).mousemove(function(at){if(c){c=false;screenfull.request()}Y=0;O(at.clientY)});var G=function(){b.hasClass("open")&&$("#sg-list").dropdown("toggle")};var o=function(av){var ax=m.length,at=$("#indicators-list"),au,aw;av=(av+ax)%ax;v=m[av];n=v.items[0];$("#sg-caption").html(m[av].title);at.html("");for(au=0;au<m[av].items.length;au++){aw=$('<li data-index="'+au+'" '+((au===0)?'class="active"':"")+"></li>");at.append(aw);aw.click(t)}$("#sg-list li.active").removeClass("active");$('#sg-list li[data-index="'+av+'"]').addClass("active");G();am(0)};var am=function(at){var au=v.items.length;G();at=(at+au)%au;$("#indicators-list li.active").removeClass("active");$("#indicators-list li[data-index="+at+"]").addClass("active");n=v.items[at];$("#xs-buttons button").toggleClass("disabled",!n.canRotate);ao()};var r=function(){var au=m.indexOf(v),at=v.items.indexOf(n)+1;if(au>=m.length-1&&at>=v.items.length){an=true;I.modal({show:true});n=new g();ao()}else{(at>=v.items.length)?o(++au):am(at)}};var X=function(){var au=m.indexOf(v),at=v.items.indexOf(n)-1;if(at<0){o(--au);at=v.items.length-1}am(at)};$("#nav-controls a.left").click(function(){X();$(this).blur();return false});$("#nav-controls a.right").click(function(){r();$(this).blur();return false});$("#close-ad").click(function(){Q.hide();E=true;al=$("#controls,#nav-controls")});q.on("swipeleft",r).on("swiperight",X);q.click(function(at){(at.clientX<window.innerWidth/2)?X():r()});$(window).keydown(function(at){if(!Z&&!an){switch(at.keyCode){case 27:ah();break;case 37:X();break;case 32:case 39:r();break;case 38:n.rotateCW();break;case 40:n.rotateCCW();break;case 13:if(at.altKey){screenfull.toggle()}else{r()}break}}else{if(at.keyCode===13&&!at.altKey&&!at.shiftKey&&!at.ctrlKey){z()}}});var t=function(at){am($(this).data("index")||0)};var y=function(at){o($(this).parent().data("index")||0);$(this).blur();return false};var ak=function(){var at,av,aw,au=0;at=$("#sg-list");for(;au<m.length;au++){av=$('<a href="#">'+m[au].title+"</a>");aw=$('<li data-index="'+au+'"></li>');aw.append(av);at.append(aw);av.click(y)}o(0)};var z=function(){Z=false;Y=0;al=$("#controls,#nav-controls,#tad-box");if(screenfull.enabled){screenfull.request();$("#front, #page-header, #page-footer").hide();o(0);q.show();al.css({opacity:1}).fadeIn()}$("html").addClass("testing");Q.show();E=false};$("#start").click(z);var ah=function(){Z=true;$("html").removeClass("testing");screenfull.exit();q.hide();al.hide();E=true;$("#board").show();$("#front, #page-header, #page-footer").show();A=true;if(n.doOnStop){n.doOnStop()}};$("#home").click(ah);$("#rotate-cw").click(function(){n.rotateCW()});$("#rotate-ccw").click(function(){n.rotateCCW()});$(".btn").click(function(){$(this).blur()});if(screenfull.enabled){document.addEventListener(screenfull.raw.fullscreenchange,function(){$("body").toggleClass("fullscreen",screenfull.isFullscreen)});$("#fsToggle").click(function(){screenfull.toggle()})}$(window).resize(ao);$(window).bind("mousewheel",function(at){if(!Z&&!an){if(at.originalEvent.wheelDelta>0){X()}else{r()}}});ak();$("#fin-close").click(function(){ah()});$("#fin-restart").click(function(){I.modal("hide");o(0)});var c=false;if(window.location.hash==="#start"){c=true;history.replaceState("",document.title,window.location.pathname);z()}})();(function(){$("#toc").toc(".main h2,h3,h4");$("#social, #fin-social").show()})();